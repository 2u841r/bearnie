{
  "name": "command",
  "description": "A command palette for searching and selecting actions",
  "category": "navigation",
  "dependencies": [],
  "devDependencies": [],
  "registryDependencies": [
    "focus-trap"
  ],
  "files": [
    {
      "name": "Command.astro",
      "path": "command/Command.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'flex h-full w-full flex-col overflow-hidden rounded-lg bg-popover text-popover-foreground',\n  className\n);\n---\n\n<div class={classes} data-command {...props}>\n  <slot />\n</div>\n\n<script>\n  import { generateId } from '@/utils/focus-trap';\n\n  function initCommands() {\n    document.querySelectorAll('[data-command]').forEach((command) => {\n      if (command.hasAttribute('data-command-initialized')) return;\n      command.setAttribute('data-command-initialized', 'true');\n\n      const input = command.querySelector('[data-command-input]') as HTMLInputElement;\n      const list = command.querySelector('[data-command-list]') as HTMLElement;\n      const empty = command.querySelector('[data-command-empty]') as HTMLElement;\n      const items = Array.from(command.querySelectorAll('[data-command-item]')) as HTMLElement[];\n      const groups = command.querySelectorAll('[data-command-group]');\n\n      // Generate IDs for ARIA relationships\n      if (list && !list.id) {\n        list.id = generateId('command-list');\n      }\n\n      // Generate IDs for items\n      items.forEach((item, index) => {\n        if (!item.id) {\n          item.id = generateId(`command-item-${index}`);\n        }\n      });\n\n      // Link input to list\n      if (input && list) {\n        input.setAttribute('aria-controls', list.id);\n      }\n\n      let selectedIndex = -1;\n\n      // Filter items based on input\n      const filterItems = () => {\n        if (!input) return;\n        \n        const query = input.value.toLowerCase().trim();\n        let visibleCount = 0;\n\n        items.forEach((item) => {\n          const text = item.textContent?.toLowerCase() || '';\n          const matches = query === '' || text.includes(query);\n          item.hidden = !matches;\n          if (matches) visibleCount++;\n        });\n\n        // Hide empty groups\n        groups.forEach((group) => {\n          const groupItems = group.querySelectorAll('[data-command-item]');\n          const hasVisibleItems = Array.from(groupItems).some(\n            (item) => !(item as HTMLElement).hidden\n          );\n          (group as HTMLElement).hidden = !hasVisibleItems;\n        });\n\n        // Show/hide empty state\n        if (empty) {\n          empty.hidden = visibleCount > 0 || query === '';\n        }\n\n        // Reset selection\n        selectedIndex = -1;\n        updateSelection();\n      };\n\n      // Update visual selection and ARIA\n      const updateSelection = () => {\n        const visibleItems = items.filter((item) => !item.hidden);\n\n        visibleItems.forEach((item, index) => {\n          if (index === selectedIndex) {\n            item.setAttribute('data-selected', 'true');\n            item.setAttribute('aria-selected', 'true');\n            item.scrollIntoView({ block: 'nearest' });\n            // Set aria-activedescendant on input\n            if (input) {\n              input.setAttribute('aria-activedescendant', item.id);\n            }\n          } else {\n            item.removeAttribute('data-selected');\n            item.setAttribute('aria-selected', 'false');\n          }\n        });\n\n        // Clear aria-activedescendant if nothing selected\n        if (selectedIndex === -1 && input) {\n          input.removeAttribute('aria-activedescendant');\n        }\n      };\n\n      // Keyboard navigation\n      const handleKeyDown = (e: KeyboardEvent) => {\n        const visibleItems = items.filter((item) => !item.hidden);\n\n        if (visibleItems.length === 0) return;\n\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            selectedIndex = Math.min(selectedIndex + 1, visibleItems.length - 1);\n            updateSelection();\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            selectedIndex = Math.max(selectedIndex - 1, 0);\n            updateSelection();\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (selectedIndex >= 0 && visibleItems[selectedIndex]) {\n              visibleItems[selectedIndex].click();\n            }\n            break;\n          case 'Escape':\n            if (input) input.blur();\n            break;\n        }\n      };\n\n      // Event listeners\n      if (input) {\n        input.addEventListener('input', filterItems);\n        input.addEventListener('keydown', handleKeyDown);\n      }\n\n      // Item click handler\n      items.forEach((item) => {\n        item.addEventListener('click', () => {\n          const value = item.getAttribute('data-value') || item.textContent;\n          command.dispatchEvent(new CustomEvent('command-select', {\n            detail: { value },\n            bubbles: true\n          }));\n        });\n      });\n    });\n  }\n\n  initCommands();\n  document.addEventListener('astro:page-load', initCommands);\n</script>\n"
    },
    {
      "name": "CommandDialog.astro",
      "path": "command/CommandDialog.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n---\n\n<div data-command-dialog class={className} {...props}>\n  <slot />\n</div>\n\n<script>\n  function initCommandDialogs() {\n    document.querySelectorAll('[data-command-dialog]').forEach((dialog) => {\n      if (dialog.hasAttribute('data-dialog-initialized')) return;\n      dialog.setAttribute('data-dialog-initialized', 'true');\n\n      const trigger = dialog.querySelector('[data-command-dialog-trigger]');\n      const overlay = dialog.querySelector('[data-command-dialog-overlay]') as HTMLElement;\n      const content = dialog.querySelector('[data-command-dialog-content]') as HTMLElement;\n\n      const openDialog = () => {\n        if (overlay) overlay.hidden = false;\n        if (content) {\n          content.hidden = false;\n          const input = content.querySelector('[data-command-input]') as HTMLInputElement;\n          input?.focus();\n        }\n        document.body.style.overflow = 'hidden';\n      };\n\n      const closeDialog = () => {\n        if (overlay) overlay.hidden = true;\n        if (content) content.hidden = true;\n        document.body.style.overflow = '';\n        \n        // Clear input and reset filter\n        const input = content?.querySelector('[data-command-input]') as HTMLInputElement;\n        if (input) {\n          input.value = '';\n          input.dispatchEvent(new Event('input'));\n        }\n      };\n\n      // Trigger click\n      trigger?.addEventListener('click', openDialog);\n\n      // Close on overlay click\n      overlay?.addEventListener('click', (e) => {\n        if (e.target === overlay) closeDialog();\n      });\n\n      // Keyboard shortcut (Cmd/Ctrl + K)\n      document.addEventListener('keydown', (e) => {\n        if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n          e.preventDefault();\n          if (overlay?.hidden) {\n            openDialog();\n          } else {\n            closeDialog();\n          }\n        }\n        \n        // Close on Escape\n        if (e.key === 'Escape' && overlay && !overlay.hidden) {\n          closeDialog();\n        }\n      });\n    });\n  }\n\n  initCommandDialogs();\n  document.addEventListener('astro:page-load', initCommandDialogs);\n</script>\n"
    },
    {
      "name": "CommandDialogContent.astro",
      "path": "command/CommandDialogContent.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2',\n  'overflow-hidden rounded-lg border bg-popover shadow-lg',\n  className\n);\n---\n\n<div class={classes} data-command-dialog-content hidden {...props}>\n  <slot />\n</div>\n"
    },
    {
      "name": "CommandDialogOverlay.astro",
      "path": "command/CommandDialogOverlay.astro",
      "content": "---\nimport { cn } from \"@/utils/cn\";\nimport type { HTMLAttributes } from \"astro/types\";\n\nexport interface Props extends HTMLAttributes<\"div\"> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  \"fixed inset-0 z-50 bg-overlay/10 backdrop-blur-sm\",\n  className,\n);\n---\n\n<div class={classes} data-command-dialog-overlay hidden {...props}></div>\n"
    },
    {
      "name": "CommandDialogTrigger.astro",
      "path": "command/CommandDialogTrigger.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'span'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'inline-block cursor-pointer',\n  className\n);\n---\n\n<span\n  data-command-dialog-trigger\n  class={classes}\n  role=\"button\"\n  tabindex=\"0\"\n  {...props}\n>\n  <slot />\n</span>\n\n<script>\n  function initCommandDialogTriggers() {\n    document.querySelectorAll('[data-command-dialog-trigger]').forEach((trigger) => {\n      if (trigger.hasAttribute('data-trigger-initialized')) return;\n      trigger.setAttribute('data-trigger-initialized', 'true');\n\n      trigger.addEventListener('keydown', (e) => {\n        const event = e as KeyboardEvent;\n        if (event.key === 'Enter' || event.key === ' ') {\n          event.preventDefault();\n          trigger.dispatchEvent(new MouseEvent('click', { bubbles: true }));\n        }\n      });\n    });\n  }\n\n  initCommandDialogTriggers();\n  document.addEventListener('astro:page-load', initCommandDialogTriggers);\n</script>\n"
    },
    {
      "name": "CommandEmpty.astro",
      "path": "command/CommandEmpty.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'py-6 text-center text-sm text-muted-foreground',\n  className\n);\n---\n\n<div class={classes} data-command-empty hidden {...props}>\n  <slot>No results found.</slot>\n</div>\n"
    },
    {
      "name": "CommandGroup.astro",
      "path": "command/CommandGroup.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  heading?: string;\n}\n\nconst { heading, class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'overflow-hidden p-1 text-foreground',\n  className\n);\n---\n\n<div class={classes} data-command-group {...props}>\n  {heading && (\n    <div class=\"px-2 py-1.5 text-xs font-medium text-muted-foreground\">\n      {heading}\n    </div>\n  )}\n  <slot />\n</div>\n"
    },
    {
      "name": "CommandInput.astro",
      "path": "command/CommandInput.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\nimport Search from '@lucide/astro/icons/search';\n\nexport interface Props extends HTMLAttributes<'input'> {\n  placeholder?: string;\n}\n\nconst { placeholder = 'Search...', class: className, ...props } = Astro.props;\n\nconst wrapperClasses = cn(\n  'flex items-center gap-2 border-b px-3',\n  className\n);\n---\n\n<div class={wrapperClasses}>\n  <Search class=\"size-4 shrink-0 text-muted-foreground\" aria-hidden=\"true\" />\n  <input\n    type=\"text\"\n    data-command-input\n    role=\"combobox\"\n    aria-expanded=\"true\"\n    aria-autocomplete=\"list\"\n    aria-haspopup=\"listbox\"\n    autocomplete=\"off\"\n    autocorrect=\"off\"\n    spellcheck=\"false\"\n    class=\"flex h-10 w-full border-0 bg-transparent text-sm outline-none focus:ring-0 placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\"\n    placeholder={placeholder}\n    {...props}\n  />\n</div>\n"
    },
    {
      "name": "CommandItem.astro",
      "path": "command/CommandItem.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  value?: string;\n  disabled?: boolean;\n  id?: string;\n}\n\nconst { value, disabled = false, class: className, id, ...props } = Astro.props;\n\nconst classes = cn(\n  'relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none',\n  'hover:bg-accent hover:text-accent-foreground',\n  'data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground',\n  'data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50',\n  className\n);\n---\n\n<div\n  class={classes}\n  data-command-item\n  data-value={value}\n  data-disabled={disabled ? 'true' : undefined}\n  role=\"option\"\n  aria-selected=\"false\"\n  aria-disabled={disabled ? 'true' : undefined}\n  id={id}\n  {...props}\n>\n  <slot />\n</div>\n"
    },
    {
      "name": "CommandList.astro",
      "path": "command/CommandList.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {\n  id?: string;\n}\n\nconst { class: className, id, ...props } = Astro.props;\n\nconst classes = cn(\n  'max-h-[300px] overflow-y-auto overflow-x-hidden',\n  className\n);\n---\n\n<div\n  class={classes}\n  data-command-list\n  role=\"listbox\"\n  id={id}\n  aria-label=\"Suggestions\"\n  {...props}\n>\n  <slot />\n</div>\n"
    },
    {
      "name": "CommandSeparator.astro",
      "path": "command/CommandSeparator.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'div'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn('-mx-1 h-px bg-border', className);\n---\n\n<div class={classes} data-command-separator {...props} />\n"
    },
    {
      "name": "CommandShortcut.astro",
      "path": "command/CommandShortcut.astro",
      "content": "---\nimport { cn } from '@/utils/cn';\nimport type { HTMLAttributes } from 'astro/types';\n\nexport interface Props extends HTMLAttributes<'span'> {}\n\nconst { class: className, ...props } = Astro.props;\n\nconst classes = cn(\n  'ml-auto text-xs tracking-widest text-muted-foreground',\n  className\n);\n---\n\n<span class={classes} data-command-shortcut {...props}>\n  <slot />\n</span>\n"
    }
  ]
}
